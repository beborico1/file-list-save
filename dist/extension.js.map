{"version":3,"file":"extension.js","mappings":"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","sources":["webpack://massive-copy/external commonjs \"vscode\"","webpack://massive-copy/external node-commonjs \"fs\"","webpack://massive-copy/external node-commonjs \"path\"","webpack://massive-copy/webpack/bootstrap","webpack://massive-copy/./src/extension.ts"],"sourcesContent":["module.exports = require(\"vscode\");","module.exports = require(\"fs\");","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import * as vscode from 'vscode';\nimport * as path from 'path';\nimport * as fs from 'fs';\n\nexport function activate(context: vscode.ExtensionContext) {\n    // Command to copy selected file types\n    let copySelected = vscode.commands.registerCommand('massive-copy.copySelected', async () => {\n        try {\n            const config = vscode.workspace.getConfiguration('massive-copy');\n            const allowedExtensions = config.get('allowedExtensions', ['.py', '.js', '.ts', '.jsx', '.tsx', '.html', '.css', '.json', '.prisma']);\n\n            await copyFiles(allowedExtensions);\n        } catch (error) {\n            console.error('Error in copySelected:', error);\n            showTemporaryError(`Error copying files: ${error}`);\n        }\n    });\n\n    // Command to copy entire repository\n    let copyRepo = vscode.commands.registerCommand('massive-copy.copyRepo', async () => {\n        try {\n            const config = vscode.workspace.getConfiguration('massive-copy');\n            const excludeFolders = config.get('excludeFolders', ['node_modules', 'venv', '.git']);\n            const allowedExtensions = config.get('allowedExtensions', ['.py', '.js', '.ts', '.jsx', '.tsx', '.html', '.css', '.json', '.prisma']);\n\n            await copyRepository(excludeFolders, allowedExtensions);\n        } catch (error) {\n            console.error('Error in copyRepo:', error);\n            showTemporaryError(`Error copying repository: ${error}`);\n        }\n    });\n\n    context.subscriptions.push(copySelected, copyRepo);\n}\n\n// Helper function to show temporary notifications\nfunction showTemporaryMessage(message: string, isError: boolean = false, duration: number = 3000) {\n    const notification = isError\n        ? vscode.window.showErrorMessage(message)\n        : vscode.window.showInformationMessage(message);\n\n    setTimeout(() => {\n        notification.then(item => {\n            if (item) {\n                // @ts-ignore - Close method exists but isn't in typings\n                item.close?.();\n            }\n        });\n    }, duration);\n}\n\nfunction showTemporaryError(message: string) {\n    showTemporaryMessage(message, true);\n}\n\nasync function copyFiles(allowedExtensions: string[]) {\n    const workspaceFolder = vscode.workspace.workspaceFolders?.[0];\n    if (!workspaceFolder) {\n        showTemporaryError('No workspace folder is open.');\n        return;\n    }\n\n    const allTabs = vscode.window.tabGroups.all.flatMap(group =>\n        group.tabs.filter(tab =>\n            tab.input instanceof vscode.TabInputText &&\n            tab.input.uri.scheme === 'file' &&\n            allowedExtensions.includes(path.extname(tab.input.uri.fsPath))\n        )\n    );\n\n    if (allTabs.length === 0) {\n        showTemporaryMessage('No matching files are currently open.');\n        return;\n    }\n\n    let fullContent = '';\n    for (const tab of allTabs) {\n        if (tab.input instanceof vscode.TabInputText) {\n            const document = await vscode.workspace.openTextDocument(tab.input.uri);\n            const relativePath = path.relative(workspaceFolder.uri.fsPath, document.uri.fsPath);\n            const fileContent = document.getText();\n\n            fullContent += `### File: ${relativePath} ###\\n${fileContent}\\n### End of ${relativePath} ###\\n\\n`;\n        }\n    }\n\n    await vscode.env.clipboard.writeText(fullContent);\n    showTemporaryMessage(`Copied ${allTabs.length} files to clipboard`);\n}\n\nasync function copyRepository(excludeFolders: string[], allowedExtensions: string[]) {\n    const workspaceFolder = vscode.workspace.workspaceFolders?.[0];\n    if (!workspaceFolder) {\n        showTemporaryError('No workspace folder is open.');\n        return;\n    }\n\n    let fullContent = '';\n    const files = await getAllFiles(workspaceFolder.uri.fsPath, excludeFolders, allowedExtensions);\n\n    if (files.length === 0) {\n        showTemporaryMessage('No matching files found in repository.');\n        return;\n    }\n\n    for (const file of files) {\n        const relativePath = path.relative(workspaceFolder.uri.fsPath, file);\n        const content = fs.readFileSync(file, 'utf8');\n        fullContent += `### File: ${relativePath} ###\\n${content}\\n### End of ${relativePath} ###\\n\\n`;\n    }\n\n    await vscode.env.clipboard.writeText(fullContent);\n    showTemporaryMessage(`Copied ${files.length} repository files to clipboard`);\n}\n\nasync function getAllFiles(dir: string, excludeFolders: string[], allowedExtensions: string[]): Promise<string[]> {\n    const entries = fs.readdirSync(dir, { withFileTypes: true });\n    const files: string[] = [];\n\n    for (const entry of entries) {\n        const fullPath = path.join(dir, entry.name);\n\n        if (entry.isDirectory()) {\n            if (!excludeFolders.includes(entry.name)) {\n                files.push(...await getAllFiles(fullPath, excludeFolders, allowedExtensions));\n            }\n        } else {\n            // Only include files with allowed extensions\n            if (allowedExtensions.includes(path.extname(fullPath))) {\n                files.push(fullPath);\n            }\n        }\n    }\n\n    return files;\n}"],"names":["module","exports","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","context","copySelected","vscode","commands","registerCommand","async","allowedExtensions","workspace","getConfiguration","get","workspaceFolder","workspaceFolders","showTemporaryError","allTabs","window","tabGroups","all","flatMap","group","tabs","filter","tab","input","TabInputText","uri","scheme","includes","path","extname","fsPath","length","showTemporaryMessage","fullContent","document","openTextDocument","relativePath","relative","getText","env","clipboard","writeText","copyFiles","error","console","copyRepo","config","excludeFolders","files","getAllFiles","file","fs","readFileSync","copyRepository","subscriptions","push","message","isError","duration","notification","showErrorMessage","showInformationMessage","setTimeout","then","item","close","dir","entries","readdirSync","withFileTypes","entry","fullPath","join","name","isDirectory"],"sourceRoot":""}